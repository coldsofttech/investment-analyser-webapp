<div class="plotly-chart">
    <div id="stockInfoChart" style="display: flex; justify-content: center; align-items: center; height: 100%; text-align: center;"></div>
</div>

<script>
    let chartData = null;
    let chartTitle = null;
    let chartCurrency = null;
    let chartShowLegend = false;

    async function renderResponsiveChart() {
        if (!chartData) {
            return;
        }

        await renderLineChart({
            chartId: 'stockInfoChart',
            chartTitle: chartTitle,
            data: chartData,
            currency: chartCurrency,
            showLegend: chartShowLegend,
            showRangeSlider: !isMobileView()
        });
    }

    document.addEventListener('lineChartReady', async function(event) {
        chartData = event.detail?.data;
        chartTitle = event.detail?.title || '';
        chartCurrency = event.detail?.currency || '';
        chartShowLegend = event.detail?.showLegend || false;

        await renderResponsiveChart();
    });

    window.addEventListener('resize', () => {
        renderResponsiveChart();
    });
</script>